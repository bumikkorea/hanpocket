# 위챗 미니프로그램 배포 프로세스

## 개요
HanPocket 미니프로그램을 개발 완료 후 위챗 플랫폼에 배포하는 전체 프로세스를 단계별로 설명합니다.

## 배포 전 체크리스트

### 1. 개발 완료 확인
- [ ] 모든 기능 정상 작동 확인
- [ ] WebView와 네이티브 브리지 통신 테스트
- [ ] 다양한 기기에서 호환성 테스트
- [ ] 성능 최적화 완료
- [ ] 보안 검토 완료

### 2. 필수 설정 확인
- [ ] app.json 설정 완료
- [ ] 도메인 화이트리스트 설정
- [ ] 권한 설정 완료
- [ ] 아이콘 및 스플래시 이미지 준비
- [ ] 개인정보 처리방침 페이지 준비

### 3. 콘텐츠 검토 준비
- [ ] 중국 법규 준수 확인
- [ ] 콘텐츠 가이드라인 준수
- [ ] 금지 콘텐츠 제거
- [ ] 텍스트 현지화 (간체중국어)

## 배포 단계

### 1단계: 개발 환경에서 최종 테스트

#### 1.1 로컬 테스트
```bash
# 위챗 개발자 도구에서 프리뷰
# 실제 기기에서 테스트 진행
```

#### 1.2 성능 체크
```javascript
// 성능 메트릭 확인
const performanceCheck = {
  // 앱 시작 시간
  launchTime: '< 3초',
  // 페이지 로딩 시간
  pageLoadTime: '< 2초',
  // WebView 로딩 시간
  webviewLoadTime: '< 5초',
  // 메모리 사용량
  memoryUsage: '< 50MB'
}
```

#### 1.3 호환성 테스트
- iOS/Android 디바이스 테스트
- 다양한 위챗 버전 테스트
- 네트워크 상태별 테스트 (Wi-Fi, 4G, 약한 신호)

### 2단계: 버전 관리 및 빌드

#### 2.1 버전 정보 업데이트
```json
// app.json
{
  "pages": [...],
  "window": {...},
  "version": "1.0.0",
  "versionName": "HanPocket 미니프로그램 v1.0",
  "description": "스마트 가계부 서비스"
}
```

#### 2.2 빌드 스크립트
```bash
#!/bin/bash
# build.sh

echo "HanPocket 미니프로그램 빌드 시작..."

# 1. 의존성 확인
npm install

# 2. 코드 압축 및 최적화
npm run build:production

# 3. 리소스 최적화
npm run optimize:assets

# 4. 버전 체크
npm run version:check

echo "빌드 완료!"
```

### 3단계: 위챗 개발자 도구에서 업로드

#### 3.1 업로드 준비
1. 위챗 개발자 도구 열기
2. 프로젝트 선택 (AppID 확인)
3. 최종 코드 검토

#### 3.2 업로드 실행
```javascript
// 업로드 설정
const uploadConfig = {
  version: '1.0.0',
  desc: '첫 번째 정식 버전 - WebView 기반 HanPocket 통합',
  setting: {
    es6: true,
    postcss: true,
    minified: true,
    urlCheck: true
  }
}
```

1. "업로드" 버튼 클릭
2. 버전 번호 및 설명 입력
3. 업로드 완료 확인

### 4단계: 위챗 공중호 플랫폼에서 심사 제출

#### 4.1 관리 후대 접속
- URL: https://mp.weixin.qq.com/
- 개발자 계정으로 로그인

#### 4.2 버전 관리
1. "개발" → "개발 버전" 메뉴
2. 업로드된 버전 확인
3. "심사 제출" 클릭

#### 4.3 심사 정보 입력
```json
{
  "appName": "HanPocket",
  "appDesc": "개인 및 가족을 위한 스마트 가계부 관리 서비스",
  "category": ["生活服务", "理财"], // 생활 서비스, 재정 관리
  "tags": ["가계부", "재정관리", "예산관리", "지출추적"],
  "targetUsers": "개인 및 가족 사용자",
  "coreFeatures": [
    "지출/수입 기록 및 분류",
    "예산 설정 및 관리",
    "재정 분석 및 리포트",
    "가족 공유 가계부"
  ]
}
```

#### 4.4 필수 자료 제출
1. **앱 아이콘 및 스크린샷**
   - 아이콘: 144x144px
   - 스크린샷: 최소 3개 (750x1334px)

2. **개인정보 처리방침**
   ```html
   <!-- privacy-policy.html -->
   <h1>HanPocket 개인정보 처리방침</h1>
   <p>수집하는 개인정보 항목: 위챗 기본 정보, 거래 내역</p>
   <p>개인정보 수집 목적: 가계부 서비스 제공</p>
   <p>개인정보 보유 기간: 서비스 이용 기간 + 1년</p>
   ```

3. **서비스 약관**
4. **테스트 계정** (선택사항)

### 5단계: 심사 진행 및 대응

#### 5.1 심사 상태 모니터링
- 심사 진행 상황: 개발 → 심사 중 → 심사 통과/거부
- 일반적인 심사 기간: 1-7일

#### 5.2 심사 거부 시 대응
```javascript
// 자주 발생하는 거부 사유 및 대응책
const rejectionReasons = {
  '기능 불완전': {
    solution: '모든 기능 정상 작동 확인 후 재제출',
    checkList: ['WebView 로딩', '네이티브 기능', '에러 처리']
  },
  '콘텐츠 규정 위반': {
    solution: '금지 콘텐츠 제거 후 재제출',
    checkList: ['정치적 내용', '성인 콘텐츠', '도박 관련']
  },
  '개인정보 정책 부족': {
    solution: '개인정보 처리방침 보완',
    checkList: ['수집 항목 명시', '이용 목적', '보관 기간']
  }
}
```

#### 5.3 수정 및 재제출
1. 거부 사유 분석
2. 해당 부분 수정
3. 재업로드 및 재제출
4. 수정 사항 상세 설명 첨부

### 6단계: 배포 승인 및 릴리즈

#### 6.1 심사 통과 확인
- 이메일 및 플랫폼 알림 확인
- 승인된 버전 정보 검토

#### 6.2 정식 릴리즈
1. "버전 관리" → "온라인 버전"
2. "릴리즈" 버튼 클릭
3. 릴리즈 시간 설정 (즉시/예약)

#### 6.3 릴리즈 후 모니터링
```javascript
// 릴리즈 후 체크사항
const postReleaseChecks = {
  functionality: '모든 기능 정상 작동',
  performance: '로딩 시간 및 응답성',
  userFeedback: '사용자 리뷰 및 평점',
  crashReports: '오류 및 크래시 보고',
  analytics: '사용 통계 및 지표'
}
```

## 배포 후 관리

### 1. 사용자 피드백 관리
- 위챗 플랫폼 내 리뷰 모니터링
- 고객센터 문의 대응
- 버그 리포트 수집 및 분석

### 2. 업데이트 배포
```bash
# 정기 업데이트 프로세스
# 1. 버그 수정 및 기능 개선
# 2. 버전 번호 증가 (1.0.0 → 1.0.1)
# 3. 테스트 및 QA
# 4. 재업로드 및 심사 제출
```

### 3. 성능 모니터링
```javascript
// 성능 지표 추적
const performanceMetrics = {
  dailyActiveUsers: 'DAU 추적',
  sessionDuration: '평균 사용 시간',
  retentionRate: '사용자 유지율',
  crashRate: '크래시 발생률',
  loadingTime: '평균 로딩 시간'
}
```

## 긴급 상황 대응

### 1. 심각한 버그 발견 시
1. 즉시 버그 분석 및 수정
2. 핫픽스 버전 준비
3. 긴급 업데이트 신청 (위챗 고객센터)
4. 사용자 공지

### 2. 서비스 중단 시
1. 원인 파악 및 복구 작업
2. 사용자 공지 및 사과
3. 보상 계획 수립 (필요시)

## 비용 및 일정

### 예상 비용
- 개발자 계정 인증: 무료 (개인) / 300위안 (기업)
- 심사 비용: 무료
- 서버 및 인프라: 기존 HanPocket 서버 활용
- 마케팅: 별도 예산 필요

### 예상 일정
- 개발 완료: 2-3주
- 테스트 및 QA: 1주
- 심사 제출: 1일
- 심사 대기: 1-7일
- 총 소요 기간: 4-6주

## 다음 단계
배포 완료 후 [필수 파일 및 설정 템플릿](04-templates-and-configs.md)을 활용하여 지속적인 관리를 진행할 수 있습니다.